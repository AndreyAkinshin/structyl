[tools]
go = "1.24"
golangci-lint = "latest"
goreleaser = "latest"

[tasks.deps]
description = "Download Go module dependencies"
run = "go mod download"

[tasks.test]
description = "Run all tests"
run = "go test -v -race ./..."

[tasks."test:unit"]
description = "Run unit tests"
run = "go test -v -race ./internal/..."

[tasks."test:integration"]
description = "Run integration tests"
run = "go test -v -race ./test/integration/..."

[tasks."test:pkg"]
description = "Run package tests"
run = "go test -v -race ./pkg/..."

[tasks.lint]
description = "Run golangci-lint"
run = "golangci-lint run"

[tasks.build]
description = "Build the structyl binary"
run = "go build -v ./cmd/structyl"

[tasks.ci]
description = "Run full CI pipeline (deps, lint, test, build)"
depends = ["deps", "lint", "test", "build"]
